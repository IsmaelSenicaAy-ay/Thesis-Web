<!DOCTYPE html>
<html>
<head>
    <title>Pressure</title>
    <link rel="stylesheet" type="text/css" href="pressure.css">
    <style>
        /* Your existing CSS styles can be placed here */
    </style>
    <script type="text/javascript" src="pressure.js"></script>
</head>
<body>
    
    <div id="right-foot">
        <img src="rfoot.png" alt="">
        <div class="sensor bottom"></div>
        <div class="sensor top-right"></div>
        <div class="sensor top-left"></div>
    </div>

    <div id="left-foot">
        <img src="lfoot.png" alt="">
        <div class="sensor bottom"></div>
        <div class="sensor top-right"></div>
        <div class="sensor top-left"></div>
    </div>

    <div class="percentage">
        <h2 id="data"></h2>
    </div>
    
    <script>
        var x = setInterval(function() {
            loadData("http://192.168.103.121/data.txt", updateData);
        }, 100);
    
        function loadData(url, callback) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    callback.apply(xhttp);
                }
            };  
            xhttp.open("GET", url, true);
            xhttp.send();
        }
    
        function updateData() {
            document.getElementById("data").innerHTML = this.responseText;
            var responseData = this.responseText;

            // Split the response into individual FSR percentage values
            var fsrValues = responseData.split(" ");

            // Iterate through each FSR value
            fsrValues.forEach(function(item) {
                // Split each item by ':' to separate the FSR identifier and the percentage value
                var parts = item.split(":");
                
                // Extract the percentage value (parts[1]) for each FSR
                var percentage = parseFloat(parts[1].replace('%', '')); 
                var percentage2 = parseFloat(parts[2].replace('%', '')); 
                var percentage3 = parseFloat(parts[3].replace('%', '')); 

                // Now you can use the percentage value as needed
    

                // Get the sensors for the left foot and right foot
                var leftFootBottomSensor = document.querySelector('#left-foot .sensor.bottom');
                var leftFootTopLeftSensor = document.querySelector('#left-foot .sensor.top-left');
                var leftFootTopRightSensor = document.querySelector('#left-foot .sensor.top-right');
                var rightFootBottomSensor = document.querySelector('#right-foot .sensor.bottom');
                var rightFootTopLeftSensor = document.querySelector('#right-foot .sensor.top-left');
                var rightFootTopRightSensor = document.querySelector('#right-foot .sensor.top-right');
                

                if (!isNaN(percentage)) { 
                    if (percentage >= 85) {
                        rightFootBottomSensor.style.backgroundColor = 'red';
                    } else if (percentage <= 84.99 && percentage >= 50) {
                        rightFootBottomSensor.style.backgroundColor = 'orange';
                    } else if (percentage <= 50 && percentage >= 30) {
                        rightFootBottomSensor.style.backgroundColor = 'yellow';
                    } else {
                        rightFootBottomSensor.style.backgroundColor = 'rgb(117, 117, 117)';
                    }
                } else {
                    rightFootBottomSensor.style.backgroundColor = 'rgb(117, 117, 117)';
                }

                if (!isNaN(percentage2)) { 
                    if (percentage2 >= 85) {
                        rightFootTopLeftSensor.style.backgroundColor = 'red';
                    } else if (percentage2 <= 84.99 && percentage2 >= 50) {
                        rightFootTopLeftSensor.style.backgroundColor = 'orange';
                    } else if (percentage2 <= 50 && percentage2 >= 30) {
                        rightFootTopLeftSensor.style.backgroundColor = 'yellow';
                    } else {
                        rightFootTopLeftSensor.style.backgroundColor = 'rgb(117, 117, 117)';
                    }
                }

                if (!isNaN(percentage3)) { 
                    if (percentage3 >= 85) {
                        rightFootTopRightSensor.style.backgroundColor = 'red';
                    } else if (percentage3 <= 84.99 && percentage3 >= 50) {
                        rightFootTopRightSensor.style.backgroundColor = 'orange';
                    } else if (percentage3 <= 50 && percentage3 >= 30) {
                        rightFootTopRightSensor.style.backgroundColor = 'yellow';
                    } else {
                        rightFootTopRightSensor.style.backgroundColor = 'rgb(117, 117, 117)';
                    }
                }
            });
        }
    </script>
</body>
</html>
